/* ************************************************************************** */
/*                                                          LE - /            */
/*                                                              /             */
/*   unicode_to_utf8.c                                .::    .:/ .      .::   */
/*                                                 +:+:+   +:    +:  +:+:+    */
/*   By: fcordon <marvin@le-101.fr>                 +:+   +:    +:    +:+     */
/*                                                 #+#   #+    #+    #+#      */
/*   Created: 2018/12/04 14:42:44 by fcordon      #+#   ##    ##    #+#       */
/*   Updated: 2018/12/20 17:38:46 by fcordon     ###    #+. /#+    ###.fr     */
/*                                                         /                  */
/*                                                        /                   */
/* ************************************************************************** */

#include "../ft_printf.h"

/*
** Le premier if retourne 1
*/

int		unicode_to_utf8(wchar_t c, char *utf8)
{
	if (c < 0x80)
		return (((*utf8 = c) & 0x0) + 0x01);
	if (c < 0x800)
	{
		utf8[1] = (c & 0x3f) | 0x80;
		utf8[0] = ((c & 0x7c0) >> 6) | 0xc0;
		return (2);
	}
	if (c < 0x10000)
	{
		utf8[2] = (c & 0x3f) | 0x80;
		utf8[1] = ((c & 0xfc0) >> 6) | 0x80;
		utf8[0] = ((c & 0xf000) >> 12) | 0xe0;
		return (3);
	}
	if (c < 0x110000)
	{
		utf8[3] = (c & 0x3f) | 0x80;
		utf8[2] = ((c & 0xfc0) >> 6) | 0x80;
		utf8[1] = ((c & 0x3f000) >> 12) | 0x80;
		utf8[0] = ((c & 0x1c0000) >> 18) | 0xf0;
		return (4);
	}
	return (0);
}
